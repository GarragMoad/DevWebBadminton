<!-- templates/equipe/_form.html.twig -->
{{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
<div class="form-group">
    {{ form_label(form.nom_equipe, null, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
    <div class="col-sm-10">
        {{ form_widget(form.nom_equipe, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div class="form-group">
    {{ form_label(form.numero_equipe, null, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
    <div class="col-sm-10">
        {{ form_widget(form.numero_equipe, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div class="form-group">
    {{ form_label(form.club, null, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
    <div class="col-sm-10">
        {{ form_widget(form.club, {'attr': {'class': 'form-control'}}) }}
    </div>
</div>

<div id="joueurs-forms">
    {% for key, joueur in form.joueurs %}
        <div class="joueur-form" data-index="{{ key }}" style="display: {{ key == 0 ? 'block' : 'none' }};">
            {{ form_widget(joueur) }}
        </div>
    {% endfor %}
</div>

<div class="form-group">
    <button type="button" id="prev-joueur" class="btn btn-secondary" style="display: none;">Précédent</button>
    <button type="button" id="next-joueur" class="btn btn-primary">Suivant</button>
    <button type="submit" id="submit-equipe" class="btn btn-success" style="display: none;">Créer l'équipe</button>
</div>

{{ form_end(form) }}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const joueurForms = document.querySelectorAll('.joueur-form');
        const prevButton = document.getElementById('prev-joueur');
        const nextButton = document.getElementById('next-joueur');
        const submitButton = document.getElementById('submit-equipe');
        let currentIndex = 0;

        function updateButtons() {
            prevButton.style.display = currentIndex > 0 ? 'inline-block' : 'none';
            nextButton.style.display = currentIndex < joueurForms.length - 1 ? 'inline-block' : 'none';
            submitButton.style.display = currentIndex === joueurForms.length - 1 ? 'inline-block' : 'none';
        }

        function showJoueur(index) {
            joueurForms.forEach((form, idx) => {
                form.style.display = idx === index ? 'block' : 'none';
            });
            currentIndex = index;
            updateButtons();
        }

        prevButton.addEventListener('click', (e) => {
            e.preventDefault();
            showJoueur(currentIndex - 1);
        });

        nextButton.addEventListener('click', (e) => {
            e.preventDefault();
            showJoueur(currentIndex + 1);
        });

        updateButtons();
    });

</script>
